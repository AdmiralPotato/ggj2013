@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <title>Game #705799 - GGJ2013</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="/Scripts/jquery.signalR-1.0.0-rc2.js"></script>
    <script src="/signalr/hubs" type="text/javascript"></script>
    <script src="/Global.js" type="text/javascript"></script>

    <link rel="stylesheet" href="/Style.css" />
    <link rel="stylesheet" href="/client/css/styles.css" />
</head>
<body>
    <div id="ui">
        <input type="submit" onclick='$.post("SetMainScreen", "view=Front");' value="Front" />
        <input type="submit" onclick='$.post("SetMainScreen", "view=Left");' value="Left" />
        <input type="submit" onclick='$.post("SetMainScreen", "view=Right");' value="Right" />
        <input type="submit" onclick='$.post("SetMainScreen", "view=Rear");' value="Rear" />
        <input type="submit" onclick='$.post("SetMainScreen", "view=Tactical");' value="Tactical" />
        <input type="submit" onclick='$.post("SetMainScreen", "view=LongRange");' value="LongRange" />
        <input type="submit" onclick='$.post("SetMainScreen", "view=Status");' value="Status" />
        <br />
        <select id="shipSelect">
            <option value="1">Heart of the Deep</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
        </select>
        <input type="text" id="shipName" value="Enter Ship Name" />
        <input type="submit" onclick='$.post("SelectShip", "defaultShipNumber=" + $("#shipSelect").val() + "&name=" + $("#shipName").val());' value="Select Ship" />
        <br />
        <select id="desiredStation">
            <option value="None">None</option>
            <option value="Main">Main</option>
            <option value="Helm">Helm</option>
            <option value="Weapons">Weapons</option>
            <option value="Engineering">Engineering</option>
            <option value="Communication">Communication</option>
            <option value="GameMaster">Game Master</option>
        </select>
        <input type="submit" onclick='$.post("SelectStation", "station=" + $("#desiredStation").val());' value="Select Station" />

        <h3>Helm</h3>
        <input type="submit" onclick='$.post("SetDesiredSpeed", "amount=50");' value="Slow" />
        <input type="submit" onclick='$.post("SetDesiredSpeed", "amount=100");' value="Medium" />
        <input type="submit" onclick='$.post("SetDesiredSpeed", "amount=300");' value="Fast" />
        <input type="submit" onclick='$.post("SetImpulse", "amount=100");' value="Go" />
        <input type="submit" onclick='$.post("SetDesiredSpeed", "amount=0");' value="Stop" />
        <br />
        <input type="text" id="desiredHeading" value="0" />
        <input type="submit" onclick='$.post("SetDesiredHeading", "amount=" + $("#desiredHeading").val());' value="Set Heading" />

        <h3>Weapons</h3>
        <input type="submit" onclick='$.post("ToggleShields");' value="Toggle Shields" />
        <br />
        <input type="submit" onclick='$.post("LoadProjectile");' value="Load" />
        <input type="text" id="desiredTarget" value="0" />
        <input type="submit" onclick='$.post("LaunchProjectile", "targetId=" + $("#desiredTarget").val());' value="Launch Projectile" />

        <h3>Engineering</h3>
        <select id="engPart">
            <option value="Thrusters">Thrusters</option>
            <option value="Engines">Engines</option>
            <option value="Weapons">Weapons</option>
        </select>
        <input type="text" id="engAmount" value="0" />
        <input type="submit" onclick='$.post("SetPowerLevel", "part=" + $("#engPart").val() + "&amount=" + $("#engAmount").val());' value="Set Power" />
        <br />
        <select id="engCoolPart">
            <option value="Thrusters">Thrusters</option>
            <option value="Engines">Engines</option>
            <option value="Weapons">Weapons</option>
        </select>
        <input type="text" id="engCoolAmount" value="0" />
        <input type="submit" onclick='$.post("SetCoolantLevel", "part=" + $("#engCoolPart").val() + "&amount=" + $("#engCoolAmount").val());' value="Set Coolant" />
        <br />
        <select id="engRepairPart">
            <option value="Thrusters">Thrusters</option>
            <option value="Engines">Engines</option>
            <option value="Weapons">Weapons</option>
        </select>
        <input type="submit" onclick='$.post("SetRepairTarget", "part=" + $("#engRepairPart").val());' value="Set Repair" />

        <h3>Communication</h3>
        <input type="text" id="comTarget" value="0" />
        <select id="command">
            <option value="None">None</option>
            <option value="StatusReport">StatusReport</option>
            <option value="Surrender">Surrender</option>
            <option value="Taunt">Taunt</option>
            <option value="GoNorth">GoNorth</option>
            <option value="Stop">Stop</option>
        </select>
        <input type="submit" onclick='$.post("SendCommand", "targetId=" + $("#comTarget").val() + "&command=" + $("#command").val());' value="Send Command" />

        <h3>Game Master</h3>
        <input type="submit" onclick='$.post("Start");' value="Reset" />
        <input type="submit" onclick='$.post("BuildBase");' value="Build Base" />
        <input type="submit" onclick='$.post("BuildShip");' value="Build Ship" />

        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <textarea id="missionStatus"></textarea>
    </div>

    <script src="https://raw.github.com/AdmiralPotato/npos3d/master/src/core.js"></script>
    <script src="https://raw.github.com/AdmiralPotato/npos3d/master/src/font.js"></script>
    <script src="/client/js/shapes-wireframe.js"></script>
    <script src="/client/js/game.js"></script>

    <script type="text/javascript">
        //$.connection.hub.logging = true;

        var gameHub = $.connection.gameHub;
        gameHub.client.handleUpdate = function (update) {
            console.log(JSON.stringify(update));
            console.log("update.missionUpdate:"+update.missionUpdate);
            if( update.missionUpdate != null )
                missionStatus.value = update.missionUpdate;
            setGameStateFromServer(update);
        };

        gameHub.client.addMessage = function (sourceId, sourceName, message) {
            AppendChatMessage(sourceId, sourceName, message);
        };

        //$.connection.hub.start()
        //    .done(function () { alert("Now connected!"); })
        //    .fail(function () { alert("Could not Connect!"); });

        $.connection.hub.start()
            .done(function () { gameHub.server.setShip(@Model.Id, 0); })
            .fail(function () { alert("Could not Connect!"); });

        $(window).unload(function () {
            gameHub.server.disconnecting(@Model.Id, 0);
        });
    </script>
</body>
</html>
